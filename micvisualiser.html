<html>
  <head>
  </head>
  <body style="background-color: #000000; overflow: hidden;">
    <div id="waveform" style="height: 200%; width: 100%; overflow: hidden; position: absolute; top: -50%;">
    </div>
    <script src="wavesurfer.js"></script>
    <script src="wavesurfer.microphone.js"></script>
    <script type="text/javascript">
      function startRed() {
        start('#ff8282');
      }
      
      function startBlue() {
          start('#82cbff');
      }
      
      function startGreen() {
        start('#82ff91');
      }
      
      function start(color) {
        var height = window.innerHeight;
        console.log(height);
        var wavesurfer = WaveSurfer.create({
          container     : '#waveform',
          waveColor: color,
          progressColor: color,
          cursorColor: '#000000',
          barWidth: 5,
          barRadius: 3,
          cursorWidth: 0,
          height: height * 2,
          barGap: 5,
          plugins: [
              WaveSurfer.microphone.create()
          ]
        });

        wavesurfer.microphone.on('deviceReady', function(stream) {
            console.log('Device ready!', stream);
        });
        wavesurfer.microphone.on('deviceError', function(code) {
            console.warn('Device error: ' + code);
        });
        wavesurfer.microphone.start();
      }
    </script>
  </body>
</html>
